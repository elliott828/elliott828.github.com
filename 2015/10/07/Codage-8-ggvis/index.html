<!doctype html>
<html class="theme-next use-motion theme-next-mist">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="google-site-verification" content="-hIKy4njeS0VoSYzKTofmv6kqKt5CyTP4IVIlIWh1N0" />
<meta name="baidu-site-verification" content="14CLULlEjC" />


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>




<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.5.1"/>




  <meta name="keywords" content="R,ggvis,visualization,dplyr,ggplot2," />





  <link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.1" />


<meta name="description" content="Why ggvis?ggvis is an awesome data visualization package which builds data graphics with a syntax similar to ggplot2 and creates rich interactive plots like shiny. Since the syntax is very structural,">
<meta property="og:type" content="article">
<meta property="og:title" content="R Package ggvis Flashback">
<meta property="og:url" content="http://elliott828.github.io/2015/10/07/Codage-8-ggvis/index.html">
<meta property="og:site_name" content="Exity">
<meta property="og:description" content="Why ggvis?ggvis is an awesome data visualization package which builds data graphics with a syntax similar to ggplot2 and creates rich interactive plots like shiny. Since the syntax is very structural,">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot1.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot2.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot3.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot4.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot5.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot6.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot7.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot8.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot9.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot10.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot11.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot12.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot13.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot14.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot15.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot16.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot17.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot18.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot19.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot20.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot21.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot22.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot23.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot24.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot25.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot26.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot27.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot28.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot29.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot30.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot31.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot32.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot33.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot34.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot35.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot36.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot37.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot38.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot39.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot40.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot41.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot42.png">
<meta property="og:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot43.png">
<meta property="og:updated_time" content="2015-11-13T07:03:30.899Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="R Package ggvis Flashback">
<meta name="twitter:description" content="Why ggvis?ggvis is an awesome data visualization package which builds data graphics with a syntax similar to ggplot2 and creates rich interactive plots like shiny. Since the syntax is very structural,">
<meta name="twitter:image" content="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot1.png">


<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: 'Mist',
    sidebar: 'post'
  };
</script>

  <title> R Package ggvis Flashback | Exity </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', '68396327-1', 'auto');
  ga('send', 'pageview');
</script>


  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?00cfd9a9530e4098a08a17043202505a";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



  <div class="container one-column page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand" rel="start">
      <span class="logo">
        <i class="icon-next-logo"></i>
      </span>
      <span class="site-title">Exity</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu menu-left">
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            <i class="menu-item-icon icon-next-archives"></i> <br />
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            <i class="menu-item-icon icon-next-categories"></i> <br />
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            <i class="menu-item-icon icon-next-tags"></i> <br />
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            <i class="menu-item-icon icon-next-about"></i> <br />
            关于
          </a>
        </li>
      

      
      
    </ul>
  

  
    <div class="site-search">
      
  
  <form class="site-search-form">
    <input type="text" id="st-search-input" class="st-search-input st-default-search-input" />
  </form>


<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', 'f-s39SMgF52UH9GHejVp','2.0.0');
</script>



    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content"> 

  <div id="posts" class="posts-expand">
    

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              R Package ggvis Flashback
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2015-10-07T20:56:41+08:00" content="2015-10-07">
            2015-10-07
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; 分类于
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/Codage-编程/" itemprop="url" rel="index">
                  <span itemprop="name">Codage|编程</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/10/07/Codage-8-ggvis/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/10/07/Codage-8-ggvis/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        <span itemprop="articleBody"><h2 id="Why-ggvis"><a href="#Why-ggvis" class="headerlink" title="Why ggvis?"></a>Why ggvis?</h2><p><code>ggvis</code> is an awesome data visualization package which builds data graphics with a syntax similar to <code>ggplot2</code> and creates rich interactive plots like <code>shiny</code>. Since the syntax is very structural, it’s easy to learn and to use.</p>
<a id="more"></a>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">require</span>(ggvis, quietly = <span class="literal">T</span>)</div><div class="line"><span class="keyword">require</span>(dplyr, quietly = <span class="literal">T</span>)</div></pre></td></tr></table></figure>
<h2 id="Basic-ggvis-Syntax"><a href="#Basic-ggvis-Syntax" class="headerlink" title="Basic ggvis Syntax"></a>Basic ggvis Syntax</h2><h3 id="Basic-Components"><a href="#Basic-Components" class="headerlink" title="Basic Components"></a>Basic Components</h3><p><code>ggvis</code> recreates the grammar of graphics. The key syntax is like this:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">data                                                                %&gt;%</div><div class="line">  ggvis(~&lt;x axis var1&gt;, ~&lt;y axisvar2&gt;, fill = ~&lt;fill property&gt;)     %&gt;%</div><div class="line">  layer_&lt;marks&gt;()</div></pre></td></tr></table></figure>
<p>You could find 4 components from the chunk above:</p>
<p>$$ Graphic = Data + CoordinateSystem + Properties + Marks $$</p>
<p>For example, using built-in dataset <code>mtcars</code>:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mtcars                                                              %&gt;%</div><div class="line">  ggvis(~hp, ~mpg, fill := <span class="string">"blue"</span>)                                  %&gt;%</div><div class="line">  layer_points()</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot1.png" alt="img1"></p>
<p>Noticed that the coordinates, properties can be moved to the <code>layer_&lt;marks&gt;()</code>, <code>ggvis()</code> can generates plot without <code>layer_&lt;marks&gt;()</code>. Those will all be concretely introduced in the following part.</p>
<h3 id="Global-vs-Local-Declaration-amp-Multiple-Layers"><a href="#Global-vs-Local-Declaration-amp-Multiple-Layers" class="headerlink" title="Global vs. Local Declaration &amp; Multiple Layers"></a>Global vs. Local Declaration &amp; Multiple Layers</h3><p><code>ggvis</code> allows multiple layers overlaid. When you put the coordinates and properties in <code>ggvis()</code>, you declare them globally. That means the coordinates and properties will be used commonly in all the following <code>layer_&lt;marks&gt;()</code></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">mtcars                                                              %&gt;%</div><div class="line">  ggvis(~hp, ~mpg, stroke := <span class="string">"blue"</span>)                                %&gt;%</div><div class="line">  layer_points()                                                    %&gt;%</div><div class="line">  layer_smooths()</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot2.png" alt="img2"></p>
<p>We specify <code>~hp, ~mpg, stroke := &quot;blue&quot;</code> in <code>ggvis()</code>, they are applied on all the layers: respectively on <code>layer_points()</code> and <code>layer_smooths()</code> for the color of border of the points and the color of the smooth line. By default the <code>fill</code> color of points is black.</p>
<p>When we do that locally, we put the properties in each layer:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">mtcars                                                              %&gt;%</div><div class="line">  ggvis(~hp, ~mpg)                                                  %&gt;%</div><div class="line">  layer_points(fill := <span class="string">"white"</span>, stroke := <span class="string">"blue"</span>)                   %&gt;%</div><div class="line">  layer_smooths(stroke := <span class="string">"red"</span>)                                    %&gt;%</div><div class="line">  layer_model_predictions(model = <span class="string">"lm"</span>, stroke := <span class="string">"navy"</span>)</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot3.png" alt="img3"></p>
<p>The properties are declared locally and both layers use <code>stroke</code> but the property works sperately in 2 layers and <code>fill</code> has no impact on <code>layer_smooths()</code>. Why we keep <code>~hp, ~mpg</code> in <code>ggvis()</code>? Because the program doesn’t have to run them twice in each layer. Keeping them in <code>ggvis()</code> makes it more efficient.</p>
<h3 id="Assignment-Symbols-amp"><a href="#Assignment-Symbols-amp" class="headerlink" title="Assignment Symbols = &amp; :="></a>Assignment Symbols <code>=</code> &amp; <code>:=</code></h3><p>The most important symbols are <code>=</code> and <code>:=</code>. You can note them as “mapping” and “setting”.</p>
<p>There are 2 spaces when plotting something - a data space and a visualization space. For example the color have HTML color codes, RGB color codes, etc. If you provide a variable to specify the <code>fill</code> using <code>=</code> (normally followed by a tilde <code>~</code>, making <code>ggvis</code> to treat it as a variable), <code>ggvis</code> will <strong>mapping</strong> the variable value on color scales first before plotting.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">pressure                                                            %&gt;%</div><div class="line">  ggvis(~temperature, ~pressure, </div><div class="line">        fill = ~pressure, size = ~temperature)                      %&gt;%</div><div class="line">  layer_points()</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot4.png" alt="img4"></p>
<p>If you directly pass a string with quotation mark to it, <code>ggvis</code> read it as a raw value.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">pressure                                                            %&gt;%</div><div class="line">  ggvis(~temperature, ~pressure, </div><div class="line">        fill := <span class="string">"skyblue"</span>, size := <span class="number">80</span>)                              %&gt;%</div><div class="line">  layer_points()</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot5.png" alt="img5"></p>
<p><em>settings vs. mapping only works for a property instead of a parameter.</em><br>You could directly use <code>=</code> + values for a parameter.</p>
<p>Besides, <code>%&gt;%</code> is based on package <code>magrittr</code> and is used widely in <code>dplyr</code>. It’s a symbol of chaining and makes the program more readable.</p>
<h2 id="Layers-amp-Properties"><a href="#Layers-amp-Properties" class="headerlink" title="Layers &amp; Properties"></a>Layers &amp; Properties</h2><p>If you don’t specify layer type, <code>ggvis</code> will use <code>layer_guess()</code> to give an approximate estimation (<code>?ggvis::layer_guess</code>). Besides the magic <code>layer_guess()</code>, I’d strongly recommand to learn more specified layers. We just show you 2 kinds of properties in previous. The basic layers and properties are as below (column names are <code>layer_&lt;marks&gt;</code> functions, row names are properties):</p>
<table>
<thead>
<tr>
<th>layer_</th>
<th>bars</th>
<th>boxplots</th>
<th>densities</th>
<th>freqpolys</th>
<th>histograms</th>
<th>lines</th>
<th>paths</th>
<th>points</th>
</tr>
</thead>
<tbody>
<tr>
<td>x / x2</td>
<td>O</td>
<td>O</td>
<td>O</td>
<td>O</td>
<td>O</td>
<td>O</td>
<td>O</td>
<td>O</td>
</tr>
<tr>
<td>y / y2</td>
<td>O</td>
<td>O</td>
<td>O</td>
<td>O</td>
<td>O</td>
<td>O</td>
<td>O</td>
<td>O</td>
</tr>
<tr>
<td>width</td>
<td>O</td>
<td>O</td>
<td>X</td>
<td>O</td>
<td>O</td>
<td>X</td>
<td>X</td>
<td>O</td>
</tr>
<tr>
<td>opacity</td>
<td>O</td>
<td>O</td>
<td>O</td>
<td>O</td>
<td>O</td>
<td>O</td>
<td>O</td>
<td>O</td>
</tr>
<tr>
<td>fill</td>
<td>O</td>
<td>O</td>
<td>O</td>
<td>O</td>
<td>O</td>
<td>O</td>
<td>O</td>
<td>O</td>
</tr>
<tr>
<td>fillOpacity</td>
<td>O</td>
<td>O</td>
<td>O</td>
<td>O</td>
<td>O</td>
<td>O</td>
<td>O</td>
<td>O</td>
</tr>
<tr>
<td>stroke</td>
<td>O</td>
<td>O</td>
<td>O</td>
<td>O</td>
<td>O</td>
<td>O</td>
<td>O</td>
<td>O</td>
</tr>
<tr>
<td>strokeWidth</td>
<td>O</td>
<td>O</td>
<td>O</td>
<td>O</td>
<td>O</td>
<td>O</td>
<td>O</td>
<td>O</td>
</tr>
<tr>
<td>strokeOpacity</td>
<td>O</td>
<td>O</td>
<td>O</td>
<td>O</td>
<td>O</td>
<td>O</td>
<td>O</td>
<td>O</td>
</tr>
<tr>
<td>size</td>
<td>X</td>
<td>O</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>O</td>
</tr>
<tr>
<td>shape</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>O</td>
</tr>
</tbody>
</table>
<p>Where <code>O</code> means supported, <code>X</code> means not supported.</p>
<h3 id="Barchart-Histogram-amp-Frequency-Polygon"><a href="#Barchart-Histogram-amp-Frequency-Polygon" class="headerlink" title="Barchart, Histogram &amp; Frequency Polygon"></a>Barchart, Histogram &amp; Frequency Polygon</h3><p>For bar graphs of counts at each unique x value, in contrast to a histogram’s bins along x ranges. Barchar and histogram both have <code>width</code> argument. However, the former one is used as column width in graphical space, the latter one to group the coutinuous data on x-axis.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># barchart</span></div><div class="line">pressure                                                          %&gt;% </div><div class="line">  ggvis(~temperature, ~pressure, fill := <span class="string">"red"</span>, opacity := <span class="number">.4</span>)    %&gt;% </div><div class="line">  layer_bars(width = <span class="number">15</span>)</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot6.png" alt="img6"></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># histogram</span></div><div class="line">iris                                                              %&gt;% </div><div class="line">  ggvis(~Sepal.Length, fill := <span class="string">"red"</span>, opacity := <span class="number">.7</span>)              %&gt;% </div><div class="line">  layer_histograms(width = <span class="number">0.5</span>)</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot7.png" alt="img7"></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># freqpoly</span></div><div class="line">iris                                                              %&gt;% </div><div class="line">  ggvis(~Sepal.Length)                                            %&gt;% </div><div class="line">  layer_freqpolys(width = <span class="number">0.5</span>, fill := <span class="string">"red"</span>, fillOpacity := <span class="number">.3</span>,</div><div class="line">                  strokeWidth := <span class="number">3</span>, stroke := <span class="string">"orange"</span>)</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot8.png" alt="img8"></p>
<p>Frequency polygon treats the continuous data in the same logic as histogram but use a line to describe the frequency evolution across ranges. Notice that I use <code>fillOpacity</code> instead of <code>opacity</code> in the third plot. That means the transparency effect is not applied on the stroke (not applied on every layer). By default there is nothing filled under the curve of frequency polygon, since we specify it, the region is filled by transparent red.</p>
<h3 id="Boxplot"><a href="#Boxplot" class="headerlink" title="Boxplot"></a>Boxplot</h3><p><code>width</code> is also a parameter of <code>layer_boxplots()</code>, the default value is 0.9. This parameter specify the distance among groups / the width of boxes. Besides the normal properties <code>fill</code>, <code>stroke</code>, etc., you can assign the <code>size</code> of outliers.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">iris                                                              %&gt;% </div><div class="line">  ggvis(~Species, ~Sepal.Width)                                   %&gt;% </div><div class="line">  layer_boxplots(size := <span class="number">20</span>, width = <span class="number">.7</span>, strokeOpacity := <span class="number">.7</span>,</div><div class="line">                 strokeWidth := <span class="number">2</span>, fill = ~Species)</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot9.png" alt="img9"></p>
<p><em>Currently the <code>layer_boxplots()</code> seems to have a bit problems under <code>ggvis</code> (version 0.4.2) when we modify the value of <code>size</code> - the mustach move but the boxes don’t. Waiting for the package update.</em></p>
<h3 id="Density-Plot"><a href="#Density-Plot" class="headerlink" title="Density Plot"></a>Density Plot</h3><p>Density plots provide another way to display the distribution of a single variable. A density plot uses a line to display the density of a variable at each point in its range. You can think of a density plot as a continuous version of a histogram with a different y scale (although this is not exactly accurate).</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">faithful                                                          %&gt;% </div><div class="line">  ggvis(~waiting)                                                 %&gt;%</div><div class="line">  layer_densities(stroke := <span class="string">"red"</span>, fill := <span class="string">"red"</span>, area = <span class="literal">FALSE</span>)</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot10.png" alt="img10"></p>
<p>You can specify the <code>area</code> parameter to decide whether there should be a shaded region drawn under the curve. In the chunk above, even you assign “red” to <code>fill</code>, there is nothing under the density curve (the dault setting is to draw a grey shadow).</p>
<h3 id="Lines-amp-Paths"><a href="#Lines-amp-Paths" class="headerlink" title="Lines &amp; Paths"></a>Lines &amp; Paths</h3><p>Firstly we compare these 2 layers:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">mtcars                                                            %&gt;%</div><div class="line">  ggvis(~wt, ~mpg)                                                %&gt;%</div><div class="line">  layer_points(size := <span class="number">30</span>, shape := <span class="string">"cross"</span>, fill := <span class="string">"grey"</span>)      %&gt;%</div><div class="line">  layer_lines(stroke := <span class="string">"red"</span>)                                    %&gt;%</div><div class="line">  layer_paths(stroke := <span class="string">"skyblue"</span>)</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot11.png" alt="img11"></p>
<p>It seems that the <code>layer_paths()</code> is chaos, but it is not. It plots starting from the very first record until the last. Let’s reorder the dataset.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">mtcars                                                            %&gt;%</div><div class="line">  arrange(wt, desc(mpg))                                          %&gt;%</div><div class="line">  ggvis(~wt, ~mpg)                                                %&gt;%</div><div class="line">  layer_lines(stroke := <span class="string">"red"</span>, strokeWidth := <span class="number">4</span>, </div><div class="line">              strokeOpacity := <span class="number">.5</span>)                                %&gt;%</div><div class="line">  layer_paths(strokeWidth := <span class="number">1</span>)</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot12.png" alt="img12"></p>
<p>Now <code>layer_paths()</code> have same trend as <code>layer_lines()</code>. <code>layer_paths()</code> is more powerful on geographical plots.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">library</span>(maps)</div><div class="line">texas &lt;- ggplot2::map_data(<span class="string">"state"</span>, region = <span class="string">"texas"</span>)</div><div class="line">texas %&gt;% ggvis(~long, ~lat) %&gt;% layer_paths()</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot13.png" alt="img13"></p>
<p>lines and paths plot can also use <code>fill</code> property.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">texas %&gt;% ggvis(~long, ~lat) %&gt;% layer_paths(fill := <span class="string">"darkorange"</span>)</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot14.png" alt="img14"></p>
<h3 id="Scatterplot"><a href="#Scatterplot" class="headerlink" title="Scatterplot"></a>Scatterplot</h3><p>We’ve been talking about <code>layer_points()</code> for many times. To be noticed that there are many values for the shape of points: <code>&quot;circle&quot;</code>(default), <code>&quot;square&quot;</code>, <code>&quot;diamond&quot;</code>, <code>&quot;cross&quot;</code>, <code>&quot;triangle-up&quot;</code> and <code>&quot;triangle-down&quot;</code>.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mtcars                                                            %&gt;%</div><div class="line">  ggvis(~hp, ~mpg)                                                %&gt;%</div><div class="line">  layer_points(shape := <span class="string">"triangle-up"</span>, fill = ~factor(cyl))</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot15.png" alt="img15"></p>
<p><code>factor()</code> converts <code>cyl</code> from numeric to categorical data and that makes the plot more clear.</p>
<h3 id="Special-Layers-Model-Prediction-amp-Smooths"><a href="#Special-Layers-Model-Prediction-amp-Smooths" class="headerlink" title="Special Layers: Model Prediction &amp; Smooths"></a>Special Layers: Model Prediction &amp; Smooths</h3><p><code>layer_model_predictions()</code> fits a model to the data and draw it with <code>layer_paths()</code> and, optionally, <code>layer_ribbons()</code>. <code>layer_smooths()</code> is a special case of layering model predictions where the model is a smooth <code>loess</code> curve whose smoothness is controlled by the span parameter. Both use same properties as <code>layer_paths()</code> and <code>layer_lines()</code>.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mtcars %&gt;% ggvis(~wt, ~mpg) %&gt;% layer_smooths()</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot16.png" alt="img16"></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mtcars %&gt;% ggvis(~wt, ~mpg) %&gt;% layer_smooths(se = <span class="literal">T</span>)</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot17.png" alt="img17"></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">mtcars                                                            %&gt;% </div><div class="line">  ggvis(~wt, ~mpg)                                                %&gt;% </div><div class="line">  layer_points(shape := <span class="string">"diamond"</span>, size := <span class="number">25</span>, fill = ~cyl)       %&gt;%</div><div class="line">  layer_model_predictions(formula = mpg ~ wt, model = <span class="string">"lm"</span>,</div><div class="line">                          stroke := <span class="string">"red"</span>, strokeOpacity := <span class="number">.5</span>)</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot18.png" alt="img18"></p>
<p>If you don’t specify the <code>formula</code> argument in <code>layer_model_predictions()</code>, <code>ggvis</code> will guess it based on the input in the global data space of <code>ggvis()</code>.</p>
<p>There are more properties and <code>layer_&lt;marks&gt;()</code>, you could make a research by typing <code>?ggvis::marks</code> and <code>??ggvis::layer_</code>.</p>
<h2 id="Layers-Equivalence"><a href="#Layers-Equivalence" class="headerlink" title="Layers Equivalence"></a>Layers Equivalence</h2><h3 id="Model-Prediction-Smooths-amp-Densities"><a href="#Model-Prediction-Smooths-amp-Densities" class="headerlink" title="Model Prediction, Smooths &amp; Densities"></a>Model Prediction, Smooths &amp; Densities</h3><p>Some layers can be realized in another way. Consider how is the <code>layer_model_predictions()</code> processed. 1. Estimate the model based on the dataset; 2. Compute predicted data; 3. Plot the predicted line.</p>
<p>In <code>ggvis</code>, <code>compute_model_prediction()</code> realizes the first 2 steps.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mtcars                                                            %&gt;%</div><div class="line">  compute_model_prediction(mpg ~ wt, model = <span class="string">"lm"</span>)                %&gt;%</div><div class="line">  head()</div></pre></td></tr></table></figure>
<p>The function returns 2 columns <code>pred_</code> and <code>resp_</code>.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">mtcars                                                            %&gt;%</div><div class="line">  compute_model_prediction(mpg ~ wt, model = <span class="string">"lm"</span>)                %&gt;%</div><div class="line">  ggvis(~pred_, ~resp_)                                           %&gt;%</div><div class="line">  layer_paths(stroke := <span class="string">"blue"</span>)</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot19.png" alt="img19"></p>
<p>The chunk returns the same line as the <code>layer_model_predictions()</code> did before. <code>layer_smooths()</code> and <code>layer_densities()</code> can be splitted to 2 steps in the same way.</p>
<p>And you can easily find the corresponding relations as below:</p>
<table>
<thead>
<tr>
<th>layer_</th>
<th>compute_</th>
<th>layer_</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>model_predictions</strong></td>
<td>model_predictions</td>
<td>paths</td>
</tr>
<tr>
<td><strong>smooths</strong></td>
<td>smooths</td>
<td>paths</td>
</tr>
<tr>
<td><strong>histograms</strong></td>
<td>bin</td>
<td>rects</td>
</tr>
<tr>
<td><strong>densities</strong></td>
<td>density</td>
<td>lines</td>
</tr>
<tr>
<td><strong>bar</strong></td>
<td>count/tabulate/stack/align</td>
<td>rects</td>
</tr>
<tr>
<td><strong>boxplots</strong></td>
<td>boxplot/stack</td>
<td>rects</td>
</tr>
</tbody>
</table>
<h3 id="Equivalence-of-Histograms"><a href="#Equivalence-of-Histograms" class="headerlink" title="Equivalence of Histograms"></a>Equivalence of Histograms</h3><p><code>compute_bin()</code> returns 5 columns where <code>count_</code> is the count in the each interval, <code>xmin_</code> and <code>xmax_</code> are the left-most and right-most border of the interval. We can use these 3 columns to plot the rectangles in the intervals.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">iris                                                              %&gt;%</div><div class="line">  compute_bin(~Sepal.Length, width = <span class="number">0.5</span>)                         %&gt;%</div><div class="line">  ggvis(x = ~xmin_, x2 = ~xmax_, y = <span class="number">0</span>, y2 = ~count_)             %&gt;% </div><div class="line">  layer_rects(fill := <span class="string">"red"</span>, opacity := <span class="number">.7</span>)</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot20.png" alt="img20"></p>
<h3 id="Equivalence-of-Density-Plot"><a href="#Equivalence-of-Density-Plot" class="headerlink" title="Equivalence of Density Plot"></a>Equivalence of Density Plot</h3><p><code>compute_density()</code> returns <code>pred_</code> and <code>resp_</code> - concatenate them by <code>layer_lines()</code> brings the exact density line.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">faithful                                                          %&gt;%</div><div class="line">  compute_density(~waiting)                                       %&gt;%</div><div class="line">  ggvis(~pred_, ~resp_)                                           %&gt;%</div><div class="line">  layer_lines(stroke := <span class="string">"red"</span>, fill := <span class="string">"red"</span>, fillOpacity := <span class="number">0.5</span>)</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot21.png" alt="img21"></p>
<h3 id="Equivalence-of-Barchart"><a href="#Equivalence-of-Barchart" class="headerlink" title="Equivalence of Barchart"></a>Equivalence of Barchart</h3><p><code>compute_count()</code> and <code>compute_tabulate()</code> only returns 2 columns - <code>x_</code> at which point what’s the level of corresponding data <code>count_</code>. And <code>compute_align()</code> helps to set up the lower and upper bound of interval.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">pressure                                                          %&gt;%</div><div class="line">  compute_count(~temperature, ~pressure)                          %&gt;%</div><div class="line">  compute_align(~x_, length = <span class="number">15</span>)                                 %&gt;%</div><div class="line">  ggvis(x = ~xmin_, x2 = ~xmax_, y = <span class="number">0</span>, y2= ~count_)              %&gt;% </div><div class="line">  layer_rects(fill := <span class="string">"red"</span>, opacity := <span class="number">.5</span>)</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot22.png" alt="img22"></p>
<p>In <code>compute_align()</code>, <code>length</code> limits the length of an interval. It’s equivalent to the <code>width</code> in <code>layer_bars()</code></p>
<p>How does <code>compute_stack()</code> works?</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">mtcars                                                            %&gt;%</div><div class="line">  compute_stack(stack_var = ~wt, group_var = ~cyl)                %&gt;%</div><div class="line">  ggvis(~cyl, ~wt)                                                %&gt;%</div><div class="line">  layer_rects(x = ~cyl - <span class="number">0.5</span>, x2 = ~cyl + <span class="number">0.5</span>, </div><div class="line">              y = ~stack_upr_, y2 = ~stack_lwr_)</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot23.png" alt="img23"></p>
<p><code>compute_stack()</code> generates 3 new variables based on data source: <code>group__</code>, <code>stack_upr_</code> and <code>stack_lwr_</code>. The latter 2 variables indicate the upper and lower y coordinates of each stack.</p>
<p>Try another classic stacked barchart:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">library</span>(data.table, quietly = <span class="literal">T</span>)</div><div class="line"></div><div class="line">FordSales &lt;- data.frame(ID = <span class="number">1</span>:<span class="number">16</span>,</div><div class="line">                        Year = rep(<span class="number">2011</span>:<span class="number">2014</span>, each = <span class="number">4</span>),</div><div class="line">                        Car = c(<span class="string">"Fiesta"</span>, <span class="string">"Focus"</span>, <span class="string">"Mondeo"</span>, <span class="string">"Escort"</span>),</div><div class="line">                        Sales = round((rnorm(<span class="number">16</span>)+<span class="number">10</span>)*<span class="number">100</span>, <span class="number">0</span>))</div><div class="line"></div><div class="line">FordSales                                                         %&gt;%</div><div class="line">  compute_stack(stack_var = ~Sales, group_var = ~Year)            %&gt;%</div><div class="line">  ggvis(~factor(Year), ~Sales, fill = ~Car, fillOpacity := <span class="number">.5</span>)    %&gt;%</div><div class="line">  layer_rects(x = ~Year - <span class="number">.3</span>, x2 = ~Year + <span class="number">.3</span>,</div><div class="line">              y = ~stack_upr_, y2 = ~stack_lwr_)</div><div class="line"><span class="comment"># You may find the ticks on x-axis are not appropriate.</span></div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot24.png" alt="img24"></p>
<p>The compound way to realize a layer helps to understand how the high level layer is generated, and gives you a way to grab the key data for plotting.</p>
<h3 id="Working-with-dplyr-Package"><a href="#Working-with-dplyr-Package" class="headerlink" title="Working with dplyr Package"></a>Working with <code>dplyr</code> Package</h3><p><code>ggvis</code> can work along with <code>dplyr</code> package. For example to recreate the plot above:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">FordSales                                                         %&gt;%</div><div class="line">  group_by(Car)                                                   %&gt;%</div><div class="line">  ggvis(~factor(Year), ~Sales)                                    %&gt;%</div><div class="line">  layer_bars(fill = ~Car, fillOpacity := <span class="number">.5</span>, width = <span class="number">0.6</span>)</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot25.png" alt="img25"></p>
<p><code>group_by()</code> also works for multiple variables.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">mtcars                                                            %&gt;% </div><div class="line">  group_by(cyl, am)                                               %&gt;% </div><div class="line">  ggvis(~mpg, fill = ~factor(cyl))                                %&gt;%</div><div class="line">  layer_densities()</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot26.png" alt="img26"></p>
<h2 id="Interactive-Output"><a href="#Interactive-Output" class="headerlink" title="Interactive Output"></a>Interactive Output</h2><hr>
<p><em>In this article, all interactivity is disabled, only screenshots are provided</em></p>
<hr>
<p><code>ggvis</code> enables interactive HTML output by a series of <code>input_&lt;form_controls&gt;()</code> functions. There are 7 input widgets:</p>
<ul>
<li><code>input_checkbox()</code> creates an interactive checkbox;</li>
<li><code>input_select()</code>, <code>input_checkboxgroup()</code> and <code>input_radiobuttons()</code><br>create interactive control to select on or more options from a list;</li>
<li><code>input_slider()</code> creates an interactive slider; <code>input_numeric()</code>;</li>
<li><code>input_text()</code> create an interactive numeric or text input box.</li>
</ul>
<h3 id="Single-Checkbox"><a href="#Single-Checkbox" class="headerlink" title="Single Checkbox"></a>Single Checkbox</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mtcars                                                            %&gt;% </div><div class="line">  ggvis(~wt, ~mpg)                                                %&gt;%</div><div class="line">  layer_smooths(se = input_checkbox(label = <span class="string">"Confidence interval"</span>))</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot27.png" alt="img27"></p>
<p>You can also split the plotting steps if the input clause is too long.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">model_type &lt;- input_checkbox(label = <span class="string">"Use flexible curve"</span>,</div><div class="line">  map = <span class="keyword">function</span>(val) <span class="keyword">if</span>(val) <span class="string">"loess"</span> <span class="keyword">else</span> <span class="string">"lm"</span>)</div><div class="line"></div><div class="line">mtcars                                                            %&gt;% </div><div class="line">  ggvis(~wt, ~mpg)                                                %&gt;%</div><div class="line">  layer_model_predictions(model = model_type)</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot28.png" alt="img28"></p>
<h3 id="Selection-from-A-List"><a href="#Selection-from-A-List" class="headerlink" title="Selection from A List"></a>Selection from A List</h3><p><code>input_select()</code> and <code>input_checkboxgroup()</code> allows multiple choice. <code>input_radiobuttons()</code> allows only one option to be picked up in the list.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># input_select()</span></div><div class="line">faithful                                                          %&gt;% </div><div class="line">  ggvis(~waiting, ~eruptions, fillOpacity := <span class="number">0.5</span>, </div><div class="line">        shape := input_select(label = <span class="string">"Choose shape:"</span>, </div><div class="line">                              choices = c(<span class="string">"circle"</span>, <span class="string">"square"</span>, </div><div class="line">                                          <span class="string">"cross"</span>, <span class="string">"diamond"</span>, </div><div class="line">                                          <span class="string">"triangle-up"</span>,</div><div class="line">                                          <span class="string">"triangle-down"</span>)),</div><div class="line">        fill := input_select(label = <span class="string">"Choose color:"</span>, </div><div class="line">                             choice = c(<span class="string">"black"</span>, <span class="string">"red"</span>, </div><div class="line">                                        <span class="string">"blue"</span>, <span class="string">"green"</span>)))        %&gt;% </div><div class="line">  layer_points()</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot29.png" alt="img29"></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">mtcars                                                            %&gt;% </div><div class="line">  ggvis(~mpg, ~wt, </div><div class="line">        fill = input_select(label = <span class="string">"Choose fill variable:"</span>, </div><div class="line">                            choice = names(mtcars), </div><div class="line">                            map = as.name))                       %&gt;% </div><div class="line">  layer_points()</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot30.png" alt="img30"></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># input_radiobuttons()</span></div><div class="line">mtcars                                                            %&gt;%</div><div class="line">  ggvis(~wt, ~mpg)                                                %&gt;%</div><div class="line">  layer_model_predictions(model = input_radiobuttons(</div><div class="line">    choices = c(<span class="string">"Linear"</span> = <span class="string">"lm"</span>, <span class="string">"LOESS"</span> = <span class="string">"loess"</span>),</div><div class="line">    selected = <span class="string">"loess"</span>,</div><div class="line">    label = <span class="string">"Model type"</span>))</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot31.png" alt="img31"></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># input_checkboxgroup()</span></div><div class="line">mtcars                                                            %&gt;%</div><div class="line">  ggvis(x = ~wt, y = ~mpg)                                        %&gt;%</div><div class="line">  layer_points(</div><div class="line">    fill := input_checkboxgroup(</div><div class="line">      choices = c(<span class="string">"Red"</span> = <span class="string">"r"</span>, <span class="string">"Green"</span> = <span class="string">"g"</span>, <span class="string">"Blue"</span> = <span class="string">"b"</span>),</div><div class="line">      label = <span class="string">"Point color components"</span>,</div><div class="line">      map = <span class="keyword">function</span>(val) &#123;</div><div class="line">        rgb(<span class="number">0.8</span> * <span class="string">"r"</span> %<span class="keyword">in</span>% val, <span class="number">0.8</span> * <span class="string">"g"</span> %<span class="keyword">in</span>% val, <span class="number">0.8</span> * <span class="string">"b"</span> %<span class="keyword">in</span>% val)</div><div class="line">      &#125;</div><div class="line">    )</div><div class="line">  )</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot32.png" alt="img32"></p>
<p>The argument <code>map</code> should be function with one single argument and returns a modified value based on this funciton. <strong>When you maps the variable name to a property, remember to use<code>=</code> instead of <code>:=</code></strong></p>
<h3 id="Slider"><a href="#Slider" class="headerlink" title="Slider"></a>Slider</h3><p>A slider is quite useful for controlling the argument of continuous data, for example, control the binwidth of a histogram:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">mtcars                                                            %&gt;% </div><div class="line">  ggvis(~mpg)                                                     %&gt;% </div><div class="line">  layer_histograms(width = input_slider(label = <span class="string">"Choose a binwidth:"</span>, </div><div class="line">                                        min = <span class="number">1</span>, max = <span class="number">20</span>))</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot33.png" alt="img33"></p>
<h3 id="Numeric-amp-Text-Input-Box"><a href="#Numeric-amp-Text-Input-Box" class="headerlink" title="Numeric &amp; Text Input Box"></a>Numeric &amp; Text Input Box</h3><p>To control the binwidth, you could also directly assign a value by <code>select_numeric()</code>.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">mtcars                                                            %&gt;% </div><div class="line">  ggvis(~mpg)                                                     %&gt;% </div><div class="line">  layer_histograms(width = input_numeric(label = <span class="string">"Choose a binwidth:"</span>, </div><div class="line">                                         value = <span class="number">1</span>))</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot34.png" alt="img34"></p>
<p>To control the fill color, you could use <code>select_text()</code>.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">mtcars                                                            %&gt;% </div><div class="line">  ggvis(~mpg)                                                     %&gt;% </div><div class="line">  layer_histograms(fill := input_text(label = <span class="string">"Choose a color:"</span>, </div><div class="line">                                      value = <span class="string">"skyblue"</span>))</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot35.png" alt="img35"></p>
<h2 id="Axes-Legends-amp-Scales"><a href="#Axes-Legends-amp-Scales" class="headerlink" title="Axes, Legends &amp; Scales"></a>Axes, Legends &amp; Scales</h2><h3 id="Axes"><a href="#Axes" class="headerlink" title="Axes"></a>Axes</h3><p>We use <code>add_axis()</code> to adjust the axis.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">faithful                                                          %&gt;% </div><div class="line">  ggvis(~waiting, ~eruptions)                                     %&gt;% </div><div class="line">  layer_points(fill := <span class="string">"red"</span>, fillOpacity := <span class="number">.3</span>, size := <span class="number">50</span>)      %&gt;% </div><div class="line">  add_axis(<span class="string">"y"</span>, title = <span class="string">"Duration of eruption (m)"</span>)               %&gt;%</div><div class="line">  add_axis(<span class="string">"x"</span>, title = <span class="string">"Time since previous eruption (m)"</span>)</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot36.png" alt="img36"></p>
<p>The first argument specify horizontal or vertical axis. Use <code>title</code> to name the axes. You can add more details:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">faithful                                                          %&gt;% </div><div class="line">  ggvis(~waiting, ~eruptions)                                     %&gt;% </div><div class="line">  layer_points(fill := <span class="string">"red"</span>, fillOpacity := <span class="number">.3</span>, size := <span class="number">50</span>)      %&gt;% </div><div class="line">  add_axis(<span class="string">"y"</span>, title = <span class="string">"Duration of eruption (m)"</span>,</div><div class="line">           value = <span class="number">2</span>:<span class="number">5</span>, subdivide = <span class="number">9</span>, orient = <span class="string">"right"</span>)          %&gt;%</div><div class="line">  add_axis(<span class="string">"x"</span>, title = <span class="string">"Time since previous eruption (m)"</span>,</div><div class="line">           values = seq(<span class="number">50</span>, <span class="number">90</span>, <span class="number">10</span>), subdivide = <span class="number">9</span>, orient = <span class="string">"top"</span>)</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot37.png" alt="img37"></p>
<p>Compare carefully the difference between the 2 plots and you will find what do those arguments serve for.</p>
<h3 id="Legends"><a href="#Legends" class="headerlink" title="Legends"></a>Legends</h3><p><code>add_legend()</code> works similarly to <code>add_axis()</code>, except that it alters the legend of a plot. Instead of specifying which axis to change, you have to specify the property you want to add to the legend. For example:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">pressure                                                          %&gt;% </div><div class="line">  ggvis(~temperature, ~pressure, fill = ~pressure)                %&gt;%</div><div class="line">  layer_points()                                                  %&gt;%</div><div class="line">  add_legend(<span class="string">"fill"</span>, title = <span class="string">"~ pressure"</span>)</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot38.png" alt="img38"></p>
<p><code>ggvis</code> will create a separate legend for each property that you use. To do this, you just need to feed <code>add_legend()</code> a vector of property names as its first argument. The code below creates legend for 3 properties: <code>fill</code>, <code>shape</code> and <code>size</code>.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">faithful                                                          %&gt;% </div><div class="line">  ggvis(~waiting, ~eruptions, opacity := <span class="number">0.6</span>, </div><div class="line">        fill = ~factor(round(eruptions)), </div><div class="line">        shape = ~factor(round(eruptions)), </div><div class="line">        size = ~round(eruptions))                                 %&gt;%</div><div class="line">  layer_points()                                                  %&gt;%</div><div class="line">  add_legend(c(<span class="string">"fill"</span>, <span class="string">"shape"</span>, <span class="string">"size"</span>), title = <span class="string">"~ duration (m)"</span>, </div><div class="line">             orient = <span class="string">"left"</span>, values = c(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>))</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot39.png" alt="img39"></p>
<h3 id="Scales"><a href="#Scales" class="headerlink" title="Scales"></a>Scales</h3><p><code>ggvis</code> provides several different functions for creating scales: <code>scale_datetime()</code>, <code>scale_logical()</code>, <code>scale_nominal()</code>, <code>scale_numeric()</code>, <code>scale_singular()</code>. Each maps a different type of data input to the visual properties that <code>ggvis</code> uses.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">mtcars                                                            %&gt;% </div><div class="line">  ggvis(~wt, ~mpg, fill = ~disp, stroke = ~disp, strokeWidth := <span class="number">2</span>)%&gt;%</div><div class="line">  layer_points()                                                  %&gt;%</div><div class="line">  scale_numeric(<span class="string">"fill"</span>, range = c(<span class="string">"red"</span>, <span class="string">"yellow"</span>))               %&gt;%</div><div class="line">  scale_numeric(<span class="string">"stroke"</span>, range = c(<span class="string">"darkred"</span>, <span class="string">"orange"</span>))</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot40.png" alt="img40"></p>
<p>The chunk above maps the value of <code>disp</code> on the scale range between <code>red</code> and <code>yellow</code> for <code>fill</code> color, between <code>darkred</code> and <code>orange</code> for <code>stroke</code> color.</p>
<p>The chunk below maps a categorical variable to fill. <code>cyl</code> has 3 unique values so we can provide a range of length 3 with the color names.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">mtcars                                                            %&gt;% </div><div class="line">  ggvis(~wt, ~mpg, fill = ~factor(cyl))                           %&gt;%</div><div class="line">  layer_points()                                                  %&gt;%</div><div class="line">  scale_nominal(<span class="string">"fill"</span>, range = c(<span class="string">"purple"</span>, <span class="string">"blue"</span>, <span class="string">"green"</span>))</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot41.png" alt="img41"></p>
<p>You can adjust any visual property in your graph with a scale (not just color). For example you can specify the opacity and the domain of axes.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">mtcars                                                            %&gt;% </div><div class="line">  ggvis(x = ~wt, y = ~mpg, fill = ~factor(cyl), opacity = ~hp)    %&gt;%</div><div class="line">  layer_points()                                                  %&gt;%</div><div class="line">  scale_numeric(<span class="string">"opacity"</span>, range = c(<span class="number">.2</span>, <span class="number">1</span>))</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot42.png" alt="img42"></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">mtcars                                                            %&gt;% </div><div class="line">  ggvis(~wt, ~mpg, fill = ~disp)                                  %&gt;%</div><div class="line">  layer_points()                                                  %&gt;%</div><div class="line">  scale_numeric(<span class="string">"y"</span>, domain = c(<span class="number">0</span>, <span class="literal">NA</span>))                           %&gt;%</div><div class="line">  scale_numeric(<span class="string">"x"</span>, domain = c(<span class="number">0</span>, <span class="number">6</span>))</div></pre></td></tr></table></figure>
<p><img src="http://7xndoy.com1.z0.glb.clouddn.com/codage8-plot43.png" alt="img43"></p>
<p><code>scale_numeric(&quot;y&quot;, domain = c(0, NA))</code> means there is no limit on the maximum value on the y-axis.</p>
<hr>
<p><strong>Be aware: ggvis interactivity cannot be displayed in HTML file converted from <code>.Rmd</code> by <code>knitr</code>.</strong></p>
<hr>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ol>
<li><a href="https://github.com/rstudio/ggvis" target="_blank" rel="external">Github - RStudio ggvis repository</a></li>
<li><a href="http://ggvis.rstudio.com/" target="_blank" rel="external">ggvis 0.4 overview</a></li>
<li><a href="https://www.datacamp.com/courses/ggvis-data-visualization-r-tutorial" target="_blank" rel="external">Data Visualization in R with ggvis</a></li>
<li><a href="ggvis:%20Interactive,%20intuitive%20graphics%20with%20R" target="_blank" rel="external">ggvis: Interactive, intuitive graphics with R</a></li>
<li><a href="http://www.r-bloggers.com/goodbye-static-graphs-hello-shiny-ggvis-rmarkdown-vs-js-solutions/" target="_blank" rel="external">Goodbye static graphs, hello shiny, ggvis, rmarkdown (vs JS solutions)</a></li>
</ol>
</span>
      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/R/" rel="tag">#R</a>
          
            <a href="/tags/ggvis/" rel="tag">#ggvis</a>
          
            <a href="/tags/visualization/" rel="tag">#visualization</a>
          
            <a href="/tags/dplyr/" rel="tag">#dplyr</a>
          
            <a href="/tags/ggplot2/" rel="tag">#ggplot2</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-prev post-nav-item">
            
              <a href="/2015/10/09/Codage-9-attaching-r-package/" rel="prev">Things to Know about Loading R Packages</a>
            
          </div>

          <div class="post-nav-next post-nav-item">
            
              <a href="/2015/10/04/hexo-4-sync-hexo-between-2-devices/" rel="next">两台设备中同步Hexo博客</a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>

 </div>

        

        
          <div class="comments" id="comments">
            
              <div class="ds-thread" data-thread-key="2015/10/07/Codage-8-ggvis/"
                   data-title="R Package ggvis Flashback" data-url="http://elliott828.github.io/2015/10/07/Codage-8-ggvis/">
              </div>
            
          </div>
        
      </div>

      
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="/uploads/avatar_storm_cat_white.png" alt="Papa Cochon" itemprop="image"/>
          <p class="site-author-name" itemprop="name">Papa Cochon</p>
        </div>
        <p class="site-description motion-element" itemprop="description"></p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">70</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/categories">
              <span class="site-state-item-count">11</span>
              <span class="site-state-item-name">分类</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">93</span>
              <span class="site-state-item-name">标签</span>
              </a>
          </div>

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
            <p class="site-author-name"></p>
            
              <span class="links-of-author-item">
              <a href="http://monkey0105.github.io/" target="_blank">大师兄</a>
              </span>
            
          
        </div>

      </section>

      
        <section class="post-toc-wrap sidebar-panel-active">
          <div class="post-toc-indicator-top post-toc-indicator"></div>
          <div class="post-toc">
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Why-ggvis"><span class="nav-number">1.</span> <span class="nav-text">Why ggvis?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Basic-ggvis-Syntax"><span class="nav-number">2.</span> <span class="nav-text">Basic ggvis Syntax</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Basic-Components"><span class="nav-number">2.1.</span> <span class="nav-text">Basic Components</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Global-vs-Local-Declaration-amp-Multiple-Layers"><span class="nav-number">2.2.</span> <span class="nav-text">Global vs. Local Declaration & Multiple Layers</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Assignment-Symbols-amp"><span class="nav-number">2.3.</span> <span class="nav-text">Assignment Symbols = & :=</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Layers-amp-Properties"><span class="nav-number">3.</span> <span class="nav-text">Layers & Properties</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Barchart-Histogram-amp-Frequency-Polygon"><span class="nav-number">3.1.</span> <span class="nav-text">Barchart, Histogram & Frequency Polygon</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Boxplot"><span class="nav-number">3.2.</span> <span class="nav-text">Boxplot</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Density-Plot"><span class="nav-number">3.3.</span> <span class="nav-text">Density Plot</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Lines-amp-Paths"><span class="nav-number">3.4.</span> <span class="nav-text">Lines & Paths</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Scatterplot"><span class="nav-number">3.5.</span> <span class="nav-text">Scatterplot</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Special-Layers-Model-Prediction-amp-Smooths"><span class="nav-number">3.6.</span> <span class="nav-text">Special Layers: Model Prediction & Smooths</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Layers-Equivalence"><span class="nav-number">4.</span> <span class="nav-text">Layers Equivalence</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Model-Prediction-Smooths-amp-Densities"><span class="nav-number">4.1.</span> <span class="nav-text">Model Prediction, Smooths & Densities</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Equivalence-of-Histograms"><span class="nav-number">4.2.</span> <span class="nav-text">Equivalence of Histograms</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Equivalence-of-Density-Plot"><span class="nav-number">4.3.</span> <span class="nav-text">Equivalence of Density Plot</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Equivalence-of-Barchart"><span class="nav-number">4.4.</span> <span class="nav-text">Equivalence of Barchart</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Working-with-dplyr-Package"><span class="nav-number">4.5.</span> <span class="nav-text">Working with dplyr Package</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Interactive-Output"><span class="nav-number">5.</span> <span class="nav-text">Interactive Output</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Single-Checkbox"><span class="nav-number">5.1.</span> <span class="nav-text">Single Checkbox</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Selection-from-A-List"><span class="nav-number">5.2.</span> <span class="nav-text">Selection from A List</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Slider"><span class="nav-number">5.3.</span> <span class="nav-text">Slider</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Numeric-amp-Text-Input-Box"><span class="nav-number">5.4.</span> <span class="nav-text">Numeric & Text Input Box</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Axes-Legends-amp-Scales"><span class="nav-number">6.</span> <span class="nav-text">Axes, Legends & Scales</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Axes"><span class="nav-number">6.1.</span> <span class="nav-text">Axes</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Legends"><span class="nav-number">6.2.</span> <span class="nav-text">Legends</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Scales"><span class="nav-number">6.3.</span> <span class="nav-text">Scales</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Reference"><span class="nav-number">7.</span> <span class="nav-text">Reference</span></a></li></ol></div>
            
          </div>
          <div class="post-toc-indicator-bottom post-toc-indicator"></div>
        </section>
      

    </div>
  </aside>


    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner"> <div class="copyright" >
  
  &copy; &nbsp;  2015 - 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="icon-next-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Papa Cochon</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

<div class="visit-statistics">
	<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
	</script>

	<span id="busuanzi_container_site_pv">
		<span id="busuanzi_value_site_pv"></span> hits from
	</span>
	
	<span id="busuanzi_container_site_uv">
		<span id="busuanzi_value_site_uv"></span> visitors 
	</span>
</div>


 </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  
  
    

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"papacochon"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>
    
     
  	<script src="/js/ua-parser.min.js"></script>
  	<script src="/js/hook-duoshuo.js"></script>
  

    
  
  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.1"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.1"></script>
  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/js/motion_global.js?v=0.4.5.1" id="motion.global"></script>




  <script type="text/javascript" src="/js/nav-toggle.js?v=0.4.5.1"></script>
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  
<script type="text/javascript" src="/js/bootstrap.scrollspy.js?v=0.4.5.1" id="bootstrap.scrollspy.custom"></script>


<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.motion.complete', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      var $indicator = $(indicator);
      var opacity = action === 'show' ? 0.4 : 0;
      $indicator.velocity ?
        $indicator.velocity('stop').velocity({
          opacity: opacity
        }, { duration: 100 }) :
        $indicator.stop().animate({
          opacity: opacity
        }, 100);
    }

  });
</script>

<script type="text/javascript" id="sidebar.nav">
  $(document).ready(function () {
    var html = $('html');
    var TAB_ANIMATE_DURATION = 200;
    var hasVelocity = $.isFunction(html.velocity);

    $('.sidebar-nav li').on('click', function () {
      var item = $(this);
      var activeTabClassName = 'sidebar-nav-active';
      var activePanelClassName = 'sidebar-panel-active';
      if (item.hasClass(activeTabClassName)) {
        return;
      }

      var currentTarget = $('.' + activePanelClassName);
      var target = $('.' + item.data('target'));

      hasVelocity ?
        currentTarget.velocity('transition.slideUpOut', TAB_ANIMATE_DURATION, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', TAB_ANIMATE_DURATION)
            .addClass(activePanelClassName);
        }) :
        currentTarget.animate({ opacity: 0 }, TAB_ANIMATE_DURATION, function () {
          currentTarget.hide();
          target
            .stop()
            .css({'opacity': 0, 'display': 'block'})
            .animate({ opacity: 1 }, TAB_ANIMATE_DURATION, function () {
              currentTarget.removeClass(activePanelClassName);
              target.addClass(activePanelClassName);
            });
        });

      item.siblings().removeClass(activeTabClassName);
      item.addClass(activeTabClassName);
    });

    $('.post-toc a').on('click', function (e) {
      e.preventDefault();
      var targetSelector = escapeSelector(this.getAttribute('href'));
      var offset = $(targetSelector).offset().top;
      hasVelocity ?
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        }) :
        $('html, body').stop().animate({
          scrollTop: offset
        }, 500);
    });

    // Expand sidebar on post detail page by default, when post has a toc.
    var $tocContent = $('.post-toc-content');
    if (isDesktop() && CONFIG.sidebar === 'post') {
      if ($tocContent.length > 0 && $tocContent.html().trim().length > 0) {
        displaySidebar();
      }
    }
  });
</script>



  <script type="text/javascript">
    $(document).ready(function () {
      if (CONFIG.sidebar === 'always') {
        displaySidebar();
      }
      if (isMobile()) {
        FastClick.attach(document.body);
      }
    });
  </script>

  
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
  });
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


  
  

  
  <script type="text/javascript" src="/js/lazyload.js"></script>
  <script type="text/javascript">
    $(function () {
      $("#posts").find('img').lazyload({
        placeholder: "/images/loading.gif",
        effect: "fadeIn"
      });
    });
  </script>
</body>
</html>
